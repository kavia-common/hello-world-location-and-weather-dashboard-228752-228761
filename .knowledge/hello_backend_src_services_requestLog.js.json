{"is_source_file": true, "format": "JavaScript (Node.js)", "description": "This file implements a RequestLogService class that manages logging of HTTP request metadata into an SQLite database. It handles database connection setup, schema creation, and provides methods to initialize the database and log request entries.", "external_files": ["../db/sqlite"], "external_methods": ["getSqliteDbPath"], "published": ["RequestLogService"], "classes": [{"name": "RequestLogService", "description": "A class responsible for managing request log entries in an SQLite database, including schema management, database connection, and logging methods."}], "methods": [{"name": "_getFallbackDbPath()", "description": "Returns the fallback path to the local SQLite database inside the backend directory.", "scope": "RequestLogService", "scopeKind": "class"}, {"name": "_openDb(dbPath)", "description": "Opens an SQLite database at the specified path, returning a promise that resolves with the database connection.", "scope": "RequestLogService", "scopeKind": "class"}, {"name": "_run(db, sql, params = [])", "description": "Executes an SQL statement with optional parameters, returning a promise that resolves when execution completes.", "scope": "RequestLogService", "scopeKind": "class"}, {"name": "_ensureSchema(db)", "description": "Creates the necessary table and indexes for request logging if they do not already exist.", "scope": "RequestLogService", "scopeKind": "class"}, {"name": "init()", "description": "Initializes the database connection, attempting preferred and fallback paths, and sets up the database schema and pragma settings.", "scope": "RequestLogService", "scopeKind": "class"}, {"name": "logRequest(entry)", "description": "Logs a request entry into the SQLite request_logs table. Calls init() to ensure database readiness, then inserts the request data.", "scope": "RequestLogService", "scopeKind": "class"}, {"name": "AnonymousFunction27e928500100(err)", "scope": "RequestLogService._run", "scopeKind": "function", "description": "unavailable"}, {"name": "constructor()", "scope": "RequestLogService", "scopeKind": "class", "description": "unavailable"}], "calls": ["getSqliteDbPath", "_openDb", "_run", "_ensureSchema", "init", "_run"], "search-terms": ["RequestLogService", "sqlite3", "logRequest", "request_logs table", "fallback database", "request logging", "Schema creation", "Database initialization"], "state": 2, "file_id": 14, "knowledge_revision": 38, "git_revision": "5e43a37aa06de4d8934d30047ac168b1a70b5735", "ctags": [{"_type": "tag", "name": "AnonymousFunction27e928500100", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^      db.run(sql, params, function (err) {$/", "language": "JavaScript", "kind": "function", "signature": "(err)", "scope": "RequestLogService._run", "scopeKind": "function"}, {"_type": "tag", "name": "RequestLogService", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^class RequestLogService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_ensureSchema", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^  async _ensureSchema(db) {$/", "language": "JavaScript", "kind": "method", "signature": "(db)", "scope": "RequestLogService", "scopeKind": "class"}, {"_type": "tag", "name": "_getFallbackDbPath", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^  _getFallbackDbPath() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RequestLogService", "scopeKind": "class"}, {"_type": "tag", "name": "_openDb", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^  _openDb(dbPath) {$/", "language": "JavaScript", "kind": "method", "signature": "(dbPath)", "scope": "RequestLogService", "scopeKind": "class"}, {"_type": "tag", "name": "_run", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^  _run(db, sql, params = []) {$/", "language": "JavaScript", "kind": "method", "signature": "(db, sql, params = [])", "scope": "RequestLogService", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RequestLogService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^module.exports = new RequestLogService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^  async init() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "RequestLogService", "scopeKind": "class"}, {"_type": "tag", "name": "logRequest", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^  async logRequest(entry) {$/", "language": "JavaScript", "kind": "method", "signature": "(entry)", "scope": "RequestLogService", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "sqlite3", "path": "/home/kavia/workspace/code-generation/hello-world-location-and-weather-dashboard-228752-228761/hello_backend/src/services/requestLog.js", "pattern": "/^const sqlite3 = require('sqlite3').verbose();$/", "language": "JavaScript", "kind": "constant"}], "hash": "acba93a99c83b39a0d8b916e465f4f77", "format-version": 4, "code-base-name": "hello_backend", "filename": "hello_backend/src/services/requestLog.js", "fields": [{"name": "module.exports = new RequestLogService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"38": "5e43a37aa06de4d8934d30047ac168b1a70b5735"}]}